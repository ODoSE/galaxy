<tool id="divergence_filter_orthologs" name="Filter orthologs">
    <description>to only retain orthologs suitable for further analysis</description>
    <requirements>
        <requirement type="python-module">divergence</requirement>
    </requirements>
    <command interpreter="python">wrapper.py divergence.filter_orthologs $logfile
--orthologs-zip $orthologszip

###if $transferedcogs
##--filter-multiple-cogs $transferedcogs
###end if

#if $filterrecombination.value == "true"
--filter-recombination $recombinedzip
--recombined-crosstable $recombinedcrosstable
--taxon-a $genomesa
--taxon-b $genomesb
#end if

--retained-zip $retainedzip
</command>
    <inputs>
<!--
        <param name="filtermultiplecogs" type="boolean" label="Filter multiple COGs" checked="false">
            <help>Filter orthologs where multiple different COGs are assigned to various strains</help>
        </param>
-->
		<param name="filterrecombination" type="select" label="Filter recombination">
			<help>Filter orthologs where there is evidence of recombination within an ortholog based upon phylogenetic tree inspection</help>
			<option value="false">No</option>
			<option value="true">Yes</option>
		</param>
		<param format="projectids" name="genomesa" type="data" label="Taxon A IDs" optional="true"/>
		<param format="projectids" name="genomesb" type="data" label="Taxon B IDs" optional="true"/>
        <param format="orthologs.zip" name="orthologszip" type="data" label="Orthologous genes" />
    </inputs>
    <outputs>
        <data format="txt" name="logfile" label="Logfile for intertaxon recombination" />
<!--
        <data format="tabular" name="transferedcogs" label="Transfered COG annotations">
        	<filter>filtermultiplecogs</filter>
        </data>
-->
        <data format="orthologs.zip" name="recombinedzip" label="Intertaxon-recombination orthologs">
            <filter>filterrecombination == "true"</filter>
        </data>
        <data format="tabular" name="recombinedcrosstable" label="Recombined ortholog gene IDs, COGs and Products">
            <filter>filterrecombination == "true"</filter>
        </data>
        <data format="orthologs.zip" name="retainedzip" label="Retained orthologs" />
    </outputs>
    <help>
This tool allows you to filter out orthologs in a number of different ways, as detailed above.

This tool will carry over 'missing' COG annotations within ortholog files if "Filter multiple COGs" is enabled.
  </help>
</tool>
