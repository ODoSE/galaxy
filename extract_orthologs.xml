<tool id="divergence_extract_orthologs" name="Extract &amp; categorize orthologs">
	<description>from OrthoMCL groups file
	</description>
	<requirements>
		<requirement type="python-module">divergence</requirement>
	</requirements>
	<command interpreter="python">wrapper.py divergence.extract_orthologs logfile
--genomes $genomes
--dna-zip $dnazip
--groups $groups

#if str($advanced_condition.advanced) == "True":
    #if str($advanced_condition.outputmucozip) == "True":
        --muco-zip $mucozip
    #end if
    #if str($advanced_condition.outputaccessoryzip) == "True":
        --subset-zip $accessoryzip
    #end if
#end if

--sico-zip $sicozip
--stats $stats
--heatmap $heatmap
</command>
	<inputs>
		<param format="projectids" name="genomes" type="data" label="GenBank Project IDs" />
		<param format="dna.zip" name="dnazip" type="data" label="Extracted DNA sequences" />
		<param format="tabular" name="groups" type="data" label="Orthologous groups" />
		<conditional name="advanced_condition">
			<param name="advanced" type="boolean" label="Show advanced options" checked="false"/>
			<when value="true">
				<param name="outputmucozip" type="boolean" label="Output shared multiple-copy orthologous genes" />
				<param name="outputaccessoryzip" type="boolean" label="Output accessory orthologous genes" />
			</when>
			<when value="false" />
		</conditional>
	</inputs>
	<outputs>
		<data format="orthologs.zip" name="sicozip" label="All shared single-copy orthologous genes" />
		<data format="orthologs.zip" name="mucozip" label="Shared multiple-copy orthologous genes">
			<filter>(advanced_condition['advanced'] and str(advanced_condition['outputmucozip']) == "True")</filter>
		</data>
		<data format="orthologs.zip" name="accessoryzip" label="Accessory orthologous genes">
			<filter>(advanced_condition['advanced'] and str(advanced_condition['outputaccessoryzip']) == "True")</filter>
		</data>
		<data format="tabular" name="heatmap" label="Ortholog distributions" />
		<data format="tabular" name="stats" label="Ortholog extraction statistics" />
	</outputs>
	<help>
For the groups or orthologous genes identified using OrthoMCL, this tool:

- extracts the DNA sequences of the single-copy orthologous genes shared across all genomes

- extracts the DNA sequences of the multiple-copy orthologous genes shared across all genomes

- extracts the DNA sequences of the accessory orthologous genes shared across a subset of genomes

- generates statistics on the ortholog extraction process in tabular format

- generates a table of ortholog distributions over single-copy, multiple-copy and accessory orthologous genes
</help>
</tool>
