<tool id="divergence_select_taxa" name="Select taxa">
	<description>from Complete Microbial Genomes table</description>
	<requirements>
		<requirement type="python-module">divergence</requirement>
	</requirements>
	<code file="select_taxa.py"/>
	<command interpreter="python">printer.py divergence.select_taxa $logfile
#if $externaldatasets
--external-genomes #for $ext in $externaldatasets #${ext.label}:${ext.fastafile},#end for
#end if

#if $genomes.value
--genomes $genomes
#end if

#if $previousfile.dataset
--previous-file $previousfile
#end if

$requireptt

--genomes-file $genomesfile
</command>
	<inputs>
		<!-- User supplied datasets, which could be unpublished, or not listed in NCBI RefSeq / GenBank -->
		<repeat name="externaldatasets" title="External genome">
			<param name="label" type="text" label="Genome label" optional="false">
				<help>Provide a unique genome label that will be used to identify your genome in further output files.</help>
			</param>
			<param format="fasta" name="fastafile" type="data" label="Genome coding regions" optional="false">
				<help>Nucleotide fasta file containing coding regions in individual records from an outside source.</help>
			</param>
		</repeat>
		<!-- Complete Microbial Genomes selectable genomes -->
		<param name="genomes" type="select" display="checkboxes" multiple="true" optional="true" force_select="false" 
		label="Choose Genomes" dynamic_options="get_complete_genomes()">
			<help>
Select between two and forty genomes for analysis, or provide external genomes not included in this list above. 
This list is synchronized with the Complete Microbial Genomes table at http://www.ncbi.nlm.nih.gov/genomes/lproks.cgi 
See the original table for alternate sorting and selection criteria.
			</help>
		</param>
		<param format="projectids" name="previousfile" type="data" label="Previous GenBank Project IDs" optional="true">
			<help>From a previous run or externally created/modified file.</help>
		</param>
		<param name="requireptt" type="boolean" checked="true" truevalue="--require-protein-table" falsevalue="">
			<label>Require protein table files be present</label>
			<help>These tables contain COGs assigned to coding sequences.</help>
		</param>
	</inputs>
	<outputs>
		<data format="txt" name="logfile" label="Logfile for ${tool.name}" />
		<data format="projectids" name="genomesfile" label="Genome GenBank Project IDs" />
	</outputs>
	<help>
This tool allows you to select genomes for analysis in the Genome-wide signatures of adaptive divergence pipeline.

No fewer than two and no more than forty genomes may be selected.
</help>
</tool>
